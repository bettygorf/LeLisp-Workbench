(loader '(
(listext (restcor savecor probefi remdir makdir copyfi renamfi deletfi lclose fchannel outchan inchan output openab openob openib opena openo openi coercns prompt lleof finbuf finpos finmax bol ttytyrds ttytycls ttytycur ttytystr ttytycn ttytynew ttytybac ttytyflu ttytyo ttytyist ttytys ttytyi tyrdspl tycls tycn tyback tyflush tyinstrg tys tyi phytrue tynewln tystrg tycursor tyo restcori input inphy ini_pio rdpscrn strgallc makevect makestrg stringa2 stringa1 copy getfns ffuncall sysprot findtag flulin outch erlec11 inicst inisymb gcnumb gcfloat gccons getsetn errnsa errudf errwna errios errnaa errnia itsoft evalan evalt))
(entry startmodule subr0)
	(title physio)
	(xrefi llinit |.undef|)
	(xrefi llinit fcons)
	(xrefi llinit bvar)
	(xrefi llinit |.t|)
	(xrefi llinit |.itsoft|)
	(xrefp llinit itsoft)
	(xrefi llinit maxchan)
	(xrefi llinit |.llsystem|)
	(xrefi llinit |.syspkgc|)
	(xrefp toperr errnia)
	(xrefp toperr errnaa)
	(xrefp toperr errios)
	(xrefp toperr errwna)
	(xrefp toperr errudf)
	(xrefp toperr errnsa)
	(xrefp toperr getsetn)
	(xrefp gc gccons)
	(xrefp gc gcfloat)
	(xrefp gc gcnumb)
	(xrefp read inisymb)
	(xrefp read inicst)
	(xrefi read |.stinread|)
	(xrefi read ringur)
	(xrefi read curread)
	(xrefi read cpkgc)
	(xrefp read erlec11)
	(xrefi print bufout)
	(xrefi print pocour)
	(xrefi print nbleft)
	(xrefi print nbrig)
	(xrefi print maxpocou)
	(xrefp print outch)
	(xrefp print flulin)
	(xrefp eval findtag)
	(xrefp eval sysprot)
	(xrefp eval ffuncall)
	(xrefi eval savea4)
	(xrefp symbs getfns)
	(xrefp fntstd copy)
	(xrefp string stringa1)
	(xrefp string stringa2)
	(xrefp string makestrg)
	(xrefp string makevect)
	(xrefp string strgallc)
	(xrefp string rdpscrn)
	(xdefp ini_pio)
	(xdefi polig)
	(xdefi inmax)
	(xdefi tabchan)
	(xdefi bufch)
	(xdefi rubstrg)
	(xdefi cntrlc)
	(xdefi istream)
	(xdefi ostream)
	(xdefp inphy)
	(xdefi curprmpt)
	(xdefp input)
	(xdefp restcori)
	(xdefp tyo)
	(xdefp tycursor)
	(xdefp tystrg)
	(xdefp tynewln)
	(xdefi curoutch)
	(xdefi |.tyrdspl|)
	(xdefi |.outchan|)
	(xdefi lgbuffer)
	(xdefp phytrue)
	(pure)
ini_pio
	(eval ())
	(mov maxchan a1)
	(movnil a2)
	(push (@ ret_call_makevect_1))
	(bra makevect)
ret_call_makevect_1
	(eval ())
	(mov a1 tabchan)
	(diff '3 maxchan)
	(mov maxchan a2)
	(plus '1 a2)
	(movnil a1)
	(mov '1 a3)
	(mov '1024 lgbuffer)
	(push (@ ret_call_inchini_2))
	(bra inchini)
ret_call_inchini_2
	(eval ())
	(movnil a1)
	(push (@ ret_call_inopen_3))
	(bra inopen)
ret_call_inopen_3
	(eval ())
	(mov maxchan a2)
	(movnil a1)
	(mov '2 a3)
	(push (@ ret_call_outchini_4))
	(bra outchini)
ret_call_outchini_4
	(eval ())
	(mov maxchan a1)
	(push (@ ret_call_outopen_5))
	(bra outopen)
ret_call_outopen_5
	(eval ())
	(mov maxchan a2)
	(plus '2 a2)
	(movnil a1)
	(mov '2 a3)
	(push (@ ret_call_outchini_6))
	(bra outchini)
ret_call_outchini_6
	(eval ())
	(mov maxchan a1)
	(plus '2 a1)
	(push (@ ret_call_outchani_7))
	(bra outchani)
ret_call_outchani_7
	(eval ())
	(hgsize bufout a1)
	(mov a1 maxpocou)
	(incr a1)
	(mov a1 nbrig)
	(mov maxchan a1)
	(push (@ ret_call_outchani_8))
	(bra outchani)
ret_call_outchani_8
	(eval ())
	(mov '1 a1)
	(mov '0 a2)
	(push (@ ret_call_makestrg_9))
	(bra makestrg)
ret_call_makestrg_9
	(eval ())
	(mov a1 bufch)
	(mov '2 a1)
	(mov '94 a2)
	(push (@ ret_call_makestrg_10))
	(bra makestrg)
ret_call_makestrg_10
	(eval ())
	(mov a1 cntrlc)
	(mov '3 a1)
	(mov '8 a2)
	(push (@ ret_call_makestrg_11))
	(bra makestrg)
ret_call_makestrg_11
	(eval ())
	(mov a1 rubstrg)
	(hbmovx '32 rubstrg '1)
	(makfnt tyi '3 (strg "tyi"))
	(makfnt tys '3 (strg "tys"))
	(makfnt tyinstrg '10 (strg "tyinstring"))
	(makfnt tyo '3 (strg "tyo"))
	(makfnt tyflush '7 (strg "tyflush"))
	(makfnt tyback '6 (strg "tyback"))
	(makfnt tynewln '9 (strg "tynewline"))
	(makfnt tycn '4 (strg "tycn"))
	(makfnt tystrg '8 (strg "tystring"))
	(makfnt tycursor '8 (strg "tycursor"))
	(makfnt tycls '5 (strg "tycls"))
	(makfnt tyrdspl '15 (strg "redisplayscreen"))
	(makcst tty '3 (strg "tty"))
	(mov |.tty| cpkgc)
	(makfnt ttytyi '3 (strg "tyi"))
	(makfnt ttytys '3 (strg "tys"))
	(makfnt ttytyist '10 (strg "tyinstring"))
	(makfnt ttytyo '3 (strg "tyo"))
	(makfnt ttytyflu '7 (strg "tyflush"))
	(makfnt ttytybac '6 (strg "tyback"))
	(makfnt ttytynew '9 (strg "tynewline"))
	(makfnt ttytycn '4 (strg "tycn"))
	(makfnt ttytystr '8 (strg "tystring"))
	(makfnt ttytycur '8 (strg "tycursor"))
	(makfnt ttytycls '5 (strg "tycls"))
	(makfnt ttytyrds '15 (strg "redisplayscreen"))
	(mov |.syspkgc| cpkgc)
	(makcst syspktty '3 (strg "tty"))
	(mov |.tty| (cval a1))
	(movnil cpkgc)
	(makcst tyco '4 (strg "tyco"))
	(makfnt bol '3 (strg "bol"))
	(makfnt finmax '5 (strg "inmax"))
	(makfnt finpos '5 (strg "inpos"))
	(makfnt finbuf '5 (strg "inbuf"))
	(makfnt lleof '3 (strg "eof"))
	(makfnt prompt '6 (strg "prompt"))
	(makcst stdprmpt '2 (strg "? "))
	(mov (pname a1) curprmpt)
	(mov |.llsystem| cpkgc)
	(makcst realterm '18 (strg "real-terminal-flag"))
	(mov |.t| (cval a1))
	(makcst linemode '14 (strg "line-mode-flag"))
	(movnil (cval a1))
	(movnil cpkgc)
	(makfnt openi '5 (strg "openi"))
	(makfnt openo '5 (strg "openo"))
	(makfnt opena '5 (strg "opena"))
	(makfnt openib '6 (strg "openib"))
	(makfnt openob '6 (strg "openob"))
	(makfnt openab '6 (strg "openab"))
	(makfnt input '5 (strg "input"))
	(makfnt inchan '6 (strg "inchan"))
	(makfnt outchan '7 (strg "outchan"))
	(makfnt fchannel '7 (strg "channel"))
	(makfnt output '6 (strg "output"))
	(makfnt lclose '5 (strg "close"))
	(makfnt deletfi '10 (strg "deletefile"))
	(makfnt renamfi '10 (strg "renamefile"))
	(makfnt copyfi '8 (strg "copyfile"))
	(makfnt probefi '9 (strg "probefile"))
	(makfnt savecor '9 (strg "save-core"))
	(makfnt restcor '12 (strg "restore-core"))
	(makfnt coercns '17 (strg "coerce-namestring"))
	(makfnt makdir '16 (strg "create-directory"))
	(makfnt remdir '16 (strg "delete-directory"))
	(return)
phytrue
	(mov |.t| a1)
	(return)
	(lentry tyi 1)
	(mov |.tyi| a1)
	(bra totty0)
	(lentry tys 1)
	(mov |.tys| a1)
	(bra totty0)
	(lentry tyinstrg 2)
	(push a1)
	(mov '1 a4)
	(mov |.tyinstrg| a1)
	(bra totty)
	(lentry tyflush 1)
	(mov |.tyflush| a1)
	(bra totty0)
	(lentry tyo 5)
	(mov |.tyo| a1)
	(bra totty)
	(lentry tyback 2)
	(push a1)
	(mov '1 a4)
	(mov |.tyback| a1)
	(bra totty)
	(lentry tynewln 1)
	(mov |.tynewln| a1)
	(bra totty0)
	(lentry tycn 2)
	(push a1)
	(mov '1 a4)
	(mov |.tycn| a1)
	(bra totty)
	(lentry tystrg 3)
	(push a1)
	(push a2)
	(mov '2 a4)
	(mov |.tystrg| a1)
	(bra totty)
	(lentry tycursor 3)
	(push a1)
	(push a2)
	(mov '2 a4)
	(mov |.tycursor| a1)
	(bra totty)
	(lentry tycls 1)
	(mov |.tycls| a1)
	(bra totty0)
	(lentry tyrdspl 5)
	(mov |.tyrdspl| a1)
	(bra totty)
totty0
	(mov '0 a4)
totty
	(eval ())
	(push a4)
	(mov a1 a2)
	(mov |.syspktty| a1)
	(mov (cval a1) a1)
	(movnil a3)
	(push a2)
	(push (@ ret_call_getfns_12))
	(bra getfns)
ret_call_getfns_12
	(eval ())
	(pop a2)
	(btnil a1 tottyer)
	(pop a4)
	(bra ffuncall)
tottyer
	(eval ())
	(mov |.syspktty| a1)
	(mov (cval a1) a1)
	(bra errudf)
	(lentry ttytyi 1)
	(push (@ ret_call_tyflush_13))
	(bra tyflush)
ret_call_tyflush_13
	(eval ())
	(ttyin a1)
	(return)
	(lentry ttytys 1)
	(push (@ ret_call_tyflush_14))
	(bra tyflush)
ret_call_tyflush_14
	(eval ())
	(ttyis a1 a2)
	(cnbeq a2 '0 tys9)
	(movnil a1)
tys9
	(return)
	(lentry ttytyist 2)
	(bfstrg a1 ttyinr)
	(push a1)
	(push (@ ret_call_tyflush_15))
	(bra tyflush)
ret_call_tyflush_15
	(eval ())
	(pop a1)
	(ttyinstr a1 a1)
	(return)
ttyinr
	(mov |.ttytyist| a2)
	(bra errnsa)
	(lentry ttytyo 5)
	(cnbeq a4 '0 ttytyo9)
	(push a4)
	(incr a4)
	(bra ttytyo2)
ttytyo1
	(xspmov a4 a1)
	(btnil a1 ttytyo2)
	(push a4)
	(push (@ ret_call_ttytyoi_16))
	(bra ttytyoi)
ret_call_ttytyoi_16
	(eval ())
	(pop a4)
ttytyo2
	(sobgtz a4 ttytyo1)
	(pop a4)
	(adjstk a4)
	(return)
ttytyo9
	(movnil a1)
	(return)
ttytyoi
	(push ostream)
	(push a1)
	(mov maxchan a1)
	(plus '2 a1)
	(push (@ ret_call_outchani_17))
	(bra outchani)
ret_call_outchani_17
	(eval ())
	(pop a1)
	(mov (@ ttytyoi1) a3)
ttytyoi0
	(push (@ ret_call_sysprot_18))
	(bra sysprot)
ret_call_sysprot_18
	(eval ())
	(pop a1)
	(xtopst a1)
	(push a3)
	(push a2)
	(push (@ ret_call_outchani_19))
	(bra outchani)
ret_call_outchani_19
	(eval ())
	(pop a2)
	(pop a3)
	(pop a1)
	(bri a3)
ttytyoi1
	(eval ())
	(btfix a1 ttytyof)
	(btcons a1 ttytyoc)
	(btstrg a1 ttytyos)
ttytyoer
	(mov |.ttytyo| a2)
	(bra errnia)
ttytyof
	(mov a1 a4)
	(push a1)
	(push (@ ret_call_outch_20))
	(bra outch)
ret_call_outch_20
	(eval ())
	(pop a1)
	(return)
ttytyoc
	(push a1)
ttytyoc1
	(push (cdr a1))
	(mov (car a1) a4)
	(push (@ ret_call_outch_21))
	(bra outch)
ret_call_outch_21
	(eval ())
	(pop a1)
	(btcons a1 ttytyoc1)
	(bfnil a1 ttytyoer)
	(pop a1)
	(return)
ttytyos
	(hgsize a1 a2)
	(plus pocour a2)
	(cnblt a2 maxpocou ttytyos1)
	(push (@ ret_call_flulin_22))
	(bra flulin)
ret_call_flulin_22
	(eval ())
ttytyos1
	(hgsize a1 a2)
	(hbmovm a2 a1 '0 bufout pocour)
	(plus a2 pocour)
	(return)
	(lentry ttytyflu 1)
	(mov maxchan a1)
	(plus '2 a1)
	(hpxmov tabchan a1 a1)
	(hpxmov a1 '3 a1)
	(cnbne a1 '0 ttytyfl1)
	(return)
ttytyfl1
	(push ostream)
	(mov maxchan a1)
	(plus '2 a1)
	(push (@ ret_call_outchani_23))
	(bra outchani)
ret_call_outchani_23
	(eval ())
	(mov (@ flulin) a3)
	(bra ttytyoi0)
	(lentry ttytybac 2)
	(mov rubstrg a1)
	(mov '3 a2)
	(bra ttytystr)
	(lentry ttytynew 1)
	(ttycrlf)
	(return)
	(lentry ttytycn 2)
	(mov bufch a2)
	(hbmovx a1 a2 '0)
	(ttystrg '1 a2)
	(return)
	(lentry ttytystr 3)
	(bfstrg a1 tystrers)
	(bffix a2 tystrern)
	(hgsize a1 a3)
	(cnblt a2 '0 ttytyst0)
	(cnblt a2 a3 ttytyst1)
ttytyst0
	(mov a3 a2)
ttytyst1
	(ttystrg a2 a1)
	(return)
tystrers
	(mov |.tystrg| a2)
	(bra errnsa)
tystrern
	(mov a2 a1)
	(mov |.tystrg| a2)
	(bra errnia)
	(lentry ttytycur 3)
	(return)
	(lentry ttytycls 1)
	(return)
	(lentry ttytyrds 5)
	(bra rdpscrn)
	(lentry bol 1)
	(push (@ ret_call_inphyl_24))
	(bra inphyl)
ret_call_inphyl_24
	(eval ())
	(movnil a1)
	(return)
	(lentry finmax 5)
	(push '0)
	(hgsize ligne a2)
	(push a2)
	(mov |.finmax| a2)
	(mov inmax a3)
	(push (@ ret_call_getsetn_25))
	(bra getsetn)
ret_call_getsetn_25
	(eval ())
	(mov a1 inmax)
	(return)
	(lentry finpos 5)
	(push '0)
	(hgsize ligne a2)
	(push a2)
	(mov |.finpos| a2)
	(mov polig a3)
	(push (@ ret_call_getsetn_26))
	(bra getsetn)
ret_call_getsetn_26
	(eval ())
	(mov a1 polig)
	(return)
	(lentry finbuf 5)
	(cnbne a4 '0 inbu1)
	(mov ligne a1)
	(return)
inbu1
	(mov |.finbuf| a2)
	(cnbeq a4 '1 inbu2)
	(cnbeq a4 '2 inbu5)
	(mov '2 a1)
	(mov |.finbuf| a2)
	(bra errwna)
inbu2
	(pop a1)
	(btfix a1 inbu3)
	(bra errnia)
inbu3
	(hbxmov ligne a1 a1)
	(return)
inbu5
	(pop a2)
	(pop a1)
	(btfix a1 inbu6)
	(bra errnia)
inbu6
	(hbmovx a2 ligne a1)
	(mov a2 a1)
	(return)
inphy
	(eval ())
	(cnbge polig inmax inph2)
	(hbxmov ligne polig a4)
	(incr polig)
	(return)
inph2
	(eval ())
	(intest)
	(push a1)
	(push a2)
	(push a4)
	(mov |.bol| a1)
	(movnil a2)
	(push (@ ret_call_itsoft_27))
	(bra itsoft)
ret_call_itsoft_27
	(eval ())
	(pop a4)
	(pop a2)
	(pop a1)
	(mov '0 polig)
	(bra inphy)
inphyl
	(eval ())
	(push a2)
	(push a4)
	(push a1)
	(push '0)
	(push '0)
inphyl0
	(btfix istream inchf)
inphy1
	(eval ())
	(mov curprmpt a1)
	(hgsize a1 a2)
	(push (@ ret_call_tystrg_28))
	(bra tystrg)
ret_call_tystrg_28
	(eval ())
	(mov '0 a4)
	(mov |.linemode| a3)
	(bfnil (cval a3) inphln)
	(mov |.realterm| a3)
	(mov (cval a3) a3)
	(btnil a3 inphp3)
inphy3
	(push (@ ret_call_tyi_29))
	(bra tyi)
ret_call_tyi_29
	(eval ())
	(mov a1 (& 1))
	(cnbeq a1 '8 inphy6)
	(cnbeq a1 '127 inphy6)
	(cnbeq a1 '24 inphy8)
	(cnbeq a1 '21 inphy8)
	(cnbeq a1 '13 inphy9)
	(cnbeq a1 '10 inphy9)
	(cnblt a1 '32 inphy5)
	(push (@ ret_call_tycn_30))
	(bra tycn)
ret_call_tycn_30
	(eval ())
inphy4
	(mov (& 1) a1)
	(mov (& 0) a4)
	(hbmovx a1 ligne a4)
	(incr a4)
	(mov a4 (& 0))
	(hgsize ligne a1)
	(cnblt a4 a1 inphy3)
	(bra inphyd)
inphy5
	(plus '64 a1)
	(hbmovx a1 cntrlc '1)
	(mov cntrlc a1)
	(mov '2 a2)
	(push (@ ret_call_tystrg_31))
	(bra tystrg)
ret_call_tystrg_31
	(eval ())
	(bra inphy4)
inphy6
	(mov (& 0) a4)
	(cnbeq a4 '0 inphy3)
	(decr a4)
	(mov a4 (& 0))
	(push (@ ret_call_inphy60_32))
	(bra inphy60)
ret_call_inphy60_32
	(eval ())
	(bra inphy3)
inphy60
	(hbxmov ligne a4 a1)
	(cnbge a1 '32 inphy61)
	(plus '64 a1)
	(push (@ ret_call_tyback_33))
	(bra tyback)
ret_call_tyback_33
	(eval ())
	(mov '94 a1)
inphy61
	(bra tyback)
inphy8
	(mov (& 0) a4)
	(cnbeq a4 '0 inphy3)
	(bra inphy81)
inphy80
	(mov a4 (& 0))
	(push (@ ret_call_inphy60_34))
	(bra inphy60)
ret_call_inphy60_34
	(eval ())
	(mov (& 0) a4)
inphy81
	(sobgez a4 inphy80)
	(mov '0 (& 0))
	(bra inphy3)
inphy9
	(push (@ ret_call_tynewln_35))
	(bra tynewln)
ret_call_tynewln_35
	(eval ())
inphyc
	(mov (& 0) a4)
	(hbmovx '13 ligne a4)
	(incr a4)
	(hbmovx '10 ligne a4)
	(incr a4)
inphyd
	(mov a4 inmax)
	(adjstk '2)
	(pop a1)
	(pop a4)
	(pop a2)
	(return)
inphp2
	(mov (& 0) a4)
	(hbmovx a1 ligne a4)
	(incr a4)
	(mov a4 (& 0))
inphp3
	(push (@ ret_call_tyi_36))
	(bra tyi)
ret_call_tyi_36
	(eval ())
	(cnbeq a1 '10 inphyc)
	(cnbne a1 '13 inphp2)
	(bra inphyc)
inphln
	(mov ligne a1)
	(push (@ ret_call_tyinstrg_37))
	(bra tyinstrg)
ret_call_tyinstrg_37
	(eval ())
	(mov a1 (& 0))
	(bra inphyc)
inchf
	(eval ())
	(hpxmov curinch '1 a3)
	(cnbeq a3 '1 inchf00)
	(cnbne a3 '3 inchf0)
	(inbfb istream ligne a4 a3)
	(mov a4 (& 0))
	(cnblt a3 '0 inchf1)
	(cnbeq a3 '1 inchf3)
	(bra inphyd)
inchf00
	(inbf istream ligne a4 a3)
	(mov a4 (& 0))
	(cnblt a3 '0 inchf1)
	(cnbeq '0 a3 inphyc)
	(cnbeq '1 a3 inchf3)
	(bra inphyd)
inchf0
	(movnil a1)
	(push (@ ret_call_inchani_38))
	(bra inchani)
ret_call_inchani_38
	(eval ())
	(mov '-4 a1)
	(mov |.inchan| a2)
	(bra errios)
inchf1
	(movnil a1)
	(push (@ ret_call_inchani_39))
	(bra inchani)
ret_call_inchani_39
	(eval ())
	(mov a3 a1)
	(mov |.inchan| a2)
	(bra errios)
inchf3
	(push a1)
	(push a2)
	(push a3)
	(push a4)
	(mov |.lleof| a1)
	(mov istream a2)
	(ncons a2)
	(push (@ ret_call_itsoft_40))
	(bra itsoft)
ret_call_itsoft_40
	(eval ())
	(pop a4)
	(pop a3)
	(pop a2)
	(pop a1)
	(bra inphyl0)
	(lentry lleof 2)
	(btnil a1 lleof1)
	(push a1)
	(fclos a1 a2)
	(movnil a2)
	(hpmovx a2 tabchan a1)
	(movnil a1)
	(push (@ ret_call_inchani_41))
	(bra inchani)
ret_call_inchani_41
	(eval ())
	(pop a1)
lleof1
	(mov |.stinread| a2)
	(btnil (cval a2) lleof2)
	(bra erlec11)
lleof2
	(mov |.lleof| a2)
	(bra findtag)
	(lentry prompt 5)
	(cnbeq a4 '0 prompt2)
	(cnbeq a4 '1 prompt1)
	(mov '2 a1)
	(mov |.prompt| a2)
	(bra errwna)
prompt1
	(pop a1)
	(mov |.prompt| savea4)
	(push (@ ret_call_stringa1_42))
	(bra stringa1)
ret_call_stringa1_42
	(eval ())
	(mov a1 curprmpt)
prompt2
	(mov curprmpt a1)
	(return)
prompter
	(mov |.prompt| a2)
	(bra errnaa)
	(lentry coercns 2)
	(return)
coerci
	(push a1)
	(mov |.coercns| a1)
	(mov '1 a4)
	(bra ffuncall)
chanalloc
	(mov maxchan a2)
	(bra chanal4)
chanal3
	(hpxmov tabchan a2 a3)
	(btnil a3 chanal9)
chanal4
	(sobgez a2 chanal3)
	(mov '-2 a2)
chanal9
	(return)
inchini
	(push a2)
	(push a1)
	(push a3)
	(mov '7 a1)
	(movnil a2)
	(push (@ ret_call_makevect_43))
	(bra makevect)
ret_call_makevect_43
	(eval ())
	(push a1)
	(mov lgbuffer a1)
	(mov '0 a2)
	(push (@ ret_call_makestrg_44))
	(bra makestrg)
ret_call_makestrg_44
	(eval ())
	(pop a2)
	(hpmovx a1 a2 '2)
	(pop a3)
	(hpmovx a3 a2 '1)
	(pop a1)
	(hpmovx a1 a2 '0)
	(hpmovx '0 a2 '3)
	(hpmovx '0 a2 '4)
	(movnil a1)
	(hpmovx a1 a2 '5)
	(hpmovx a1 a2 '6)
	(pop a1)
	(hpmovx a2 tabchan a1)
	(return)
outchini
	(push a2)
	(push a1)
	(push a3)
	(mov '7 a1)
	(movnil a2)
	(push (@ ret_call_makevect_45))
	(bra makevect)
ret_call_makevect_45
	(eval ())
	(push a1)
	(mov lgbuffer a1)
	(mov '32 a2)
	(push (@ ret_call_makestrg_46))
	(bra makestrg)
ret_call_makestrg_46
	(eval ())
	(pop a2)
	(hpmovx a1 a2 '2)
	(pop a3)
	(hpmovx a3 a2 '1)
	(pop a3)
	(hpmovx a3 a2 '0)
	(hpmovx '0 a2 '3)
	(hpmovx nbleft a2 '4)
	(hpmovx nbrig a2 '5)
	(hpmovx maxpocou a2 '6)
	(pop a1)
	(hpmovx a2 tabchan a1)
	(return)
openr1
	(mov a2 a1)
openr2
	(mov savea4 a2)
	(bra errios)
	(lentry openi 2)
	(push (@ ret_call_coerci_47))
	(bra coerci)
ret_call_coerci_47
	(eval ())
	(mov |.openi| savea4)
	(push (@ ret_call_stringa1_48))
	(bra stringa1)
ret_call_stringa1_48
	(eval ())
	(push (@ ret_call_chanalloc_49))
	(bra chanalloc)
ret_call_chanalloc_49
	(eval ())
	(cnbeq a2 '-2 openr1)
	(infile a2 a1 a3)
	(cnbne a3 '0 openr2)
	(mov '1 a3)
	(bra inchini)
	(lentry openo 2)
	(push (@ ret_call_coerci_50))
	(bra coerci)
ret_call_coerci_50
	(eval ())
	(mov |.openo| savea4)
	(push (@ ret_call_stringa1_51))
	(bra stringa1)
ret_call_stringa1_51
	(eval ())
	(push (@ ret_call_chanalloc_52))
	(bra chanalloc)
ret_call_chanalloc_52
	(eval ())
	(cnbeq a2 '-2 openr1)
	(oufile a2 a1 a4)
	(cnbne a4 '0 openr2)
	(mov '2 a3)
	(bra outchini)
	(lentry opena 2)
	(push (@ ret_call_coerci_53))
	(bra coerci)
ret_call_coerci_53
	(eval ())
	(mov |.opena| savea4)
	(push (@ ret_call_stringa1_54))
	(bra stringa1)
ret_call_stringa1_54
	(eval ())
	(push (@ ret_call_chanalloc_55))
	(bra chanalloc)
ret_call_chanalloc_55
	(eval ())
	(cnbeq a2 '-2 openr1)
	(apfile a2 a1 a4)
	(cnbne a4 '0 openr2)
	(mov '2 a3)
	(bra outchini)
	(lentry openib 2)
	(push (@ ret_call_coerci_56))
	(bra coerci)
ret_call_coerci_56
	(eval ())
	(mov |.openib| savea4)
	(push (@ ret_call_stringa1_57))
	(bra stringa1)
ret_call_stringa1_57
	(eval ())
	(push (@ ret_call_chanalloc_58))
	(bra chanalloc)
ret_call_chanalloc_58
	(eval ())
	(cnbeq a2 '-2 openr1)
	(infileb a2 a1 a3)
	(cnbne a3 '0 openr2)
	(mov '3 a3)
	(bra inchini)
	(lentry openob 2)
	(push (@ ret_call_coerci_59))
	(bra coerci)
ret_call_coerci_59
	(eval ())
	(mov |.openob| savea4)
	(push (@ ret_call_stringa1_60))
	(bra stringa1)
ret_call_stringa1_60
	(eval ())
	(push (@ ret_call_chanalloc_61))
	(bra chanalloc)
ret_call_chanalloc_61
	(eval ())
	(cnbeq a2 '-2 openr1)
	(oufileb a2 a1 a3)
	(cnbne a3 '0 openr2)
	(mov '4 a3)
	(bra outchini)
	(lentry openab 2)
	(push (@ ret_call_coerci_62))
	(bra coerci)
ret_call_coerci_62
	(eval ())
	(mov |.openab| savea4)
	(push (@ ret_call_stringa1_63))
	(bra stringa1)
ret_call_stringa1_63
	(eval ())
	(push (@ ret_call_chanalloc_64))
	(bra chanalloc)
ret_call_chanalloc_64
	(eval ())
	(cnbeq a2 '-2 openr1)
	(apfileb a2 a1 a3)
	(cnbne a3 '0 openr2)
	(mov '4 a3)
	(bra outchini)
	(lentry input 2)
	(btnil istream inputi)
	(push a1)
	(mov istream a1)
	(push (@ ret_call_closeint_65))
	(bra closeint)
ret_call_closeint_65
	(eval ())
	(pop a1)
inputi
	(eval ())
	(btnil a1 input2)
	(push (@ ret_call_openi_66))
	(bra openi)
ret_call_openi_66
	(eval ())
input2
	(push (@ ret_call_inchani_67))
	(bra inchani)
ret_call_inchani_67
	(eval ())
	(bra phytrue)
	(lentry output 2)
	(cnbge ostream maxchan ouput1)
	(push a1)
	(mov ostream a1)
	(push (@ ret_call_closeint_68))
	(bra closeint)
ret_call_closeint_68
	(eval ())
	(pop a1)
ouput1
	(btnil a1 ouput2)
	(cabne a1 |.t| ouput3)
	(mov maxchan a1)
	(plus '2 a1)
	(bra ouput4)
ouput2
	(mov maxchan a1)
	(bra ouput4)
ouput3
	(push (@ ret_call_openo_69))
	(bra openo)
ret_call_openo_69
	(eval ())
ouput4
	(push (@ ret_call_outchani_70))
	(bra outchani)
ret_call_outchani_70
	(eval ())
	(bra phytrue)
	(lentry inchan 5)
	(cnbeq a4 '0 inchget)
	(cnbeq a4 '1 inchset)
	(mov '1 a1)
	(mov |.inchan| a2)
	(bra errwna)
inchget
	(mov istream a1)
	(return)
inchset
	(pop a1)
	(btfix a1 inchst2)
	(btnil a1 inchst3)
incherr1
	(mov '-3 a1)
incherr2
	(mov |.inchan| a2)
	(bra errios)
inchst2
	(cnblt a1 '0 incherr1)
	(cnbge a1 maxchan incherr1)
	(hpxmov tabchan a1 a2)
	(btnil a2 incherr3)
	(hpxmov a2 '1 a2)
	(cnbeq a2 '1 inchani)
	(cnbne a2 '3 incherr3)
inchst3
	(bra inchani)
incherr3
	(mov '-4 a1)
	(bra incherr2)
inchani
	(eval ())
	(push a1)
	(push (@ ret_call_inclose_71))
	(bra inclose)
ret_call_inclose_71
	(eval ())
	(pop a1)
inopen
	(eval ())
	(mov a1 istream)
	(bfnil a1 inchani3)
	(mov maxchan a2)
	(incr a2)
	(bra inchani4)
inchani3
	(mov a1 a2)
inchani4
	(hpxmov tabchan a2 a2)
	(hpxmov a2 '2 ligne)
	(hpxmov a2 '3 polig)
	(hpxmov a2 '4 inmax)
	(hpxmov a2 '5 curread)
	(hpxmov a2 '6 ringur)
	(mov a2 curinch)
	(return)
inclose
	(eval ())
	(mov istream a2)
	(bfnil a2 inchani1)
	(mov maxchan a2)
	(incr a2)
inchani1
	(hpxmov tabchan a2 a2)
	(btnil a2 inchani2)
	(hpmovx ligne a2 '2)
	(hpmovx polig a2 '3)
	(hpmovx inmax a2 '4)
	(hpmovx curread a2 '5)
	(hpmovx ringur a2 '6)
inchani2
	(return)
	(lentry outchan 5)
	(cnbeq a4 '0 ouchget)
	(cnbeq a4 '1 ouchset)
	(mov '1 a1)
	(mov |.outchan| a2)
	(bra errwna)
ouchget
	(mov ostream a1)
	(mov maxchan a2)
	(cnblt a1 a2 ouchget2)
	(cnbeq a1 a2 ouchget1)
	(mov |.t| a1)
	(return)
ouchget1
	(movnil a1)
ouchget2
	(return)
ouchset
	(topst a1)
	(btfix a1 ouchst2)
	(btnil a1 ouchst1)
	(cabne a1 |.t| oucherr1)
	(mov maxchan a1)
	(plus '2 a1)
	(bra ouchst3)
ouchst1
	(mov maxchan a1)
	(bra ouchst3)
ouchst2
	(cnblt a1 '0 oucherr1)
	(cnbge a1 maxchan oucherr1)
	(hpxmov tabchan a1 a2)
	(btnil a2 oucherr3)
	(hpxmov a2 '1 a2)
	(cnbeq a2 '4 ouchst3)
	(cnbne a2 '2 oucherr3)
ouchst3
	(push (@ ret_call_outchani_72))
	(bra outchani)
ret_call_outchani_72
	(eval ())
	(pop a1)
	(return)
oucherr3
	(mov '-4 a1)
	(bra oucherr2)
oucherr1
	(mov '-3 a1)
oucherr2
	(mov |.outchan| a2)
	(bra errios)
outchani
	(push (@ ret_call_outclose_73))
	(bra outclose)
ret_call_outclose_73
	(eval ())
outopen
	(eval ())
	(mov a1 ostream)
outchai3
	(mov a1 a2)
outchai4
	(hpxmov tabchan a2 a2)
	(hpxmov a2 '2 bufout)
	(hpxmov a2 '3 pocour)
	(hpxmov a2 '4 nbleft)
	(hpxmov a2 '5 nbrig)
	(hpxmov a2 '6 maxpocou)
	(mov a2 curoutch)
	(return)
outclose
	(eval ())
	(mov ostream a2)
outchai1
	(hpxmov tabchan a2 a2)
	(btnil a2 outchai2)
	(hpmovx bufout a2 '2)
	(hpmovx pocour a2 '3)
	(hpmovx nbleft a2 '4)
	(hpmovx nbrig a2 '5)
	(hpmovx maxpocou a2 '6)
outchai2
	(return)
	(lentry fchannel 5)
	(cnbeq a4 '0 fchan5)
	(cnbeq a4 '1 fchan1)
	(mov '1 a1)
	(mov |.fchannel| a2)
	(bra errwna)
fchan1
	(pop a1)
	(btfix a1 fchan2)
	(cabeq a1 |.t| fchan8)
	(mov |.fchannel| a2)
	(bra errnia)
fchan2
	(cnblt a1 '0 fchan4)
	(cnbge a1 maxchan fchan4)
fchan21
	(hpxmov tabchan a1 a1)
	(btnil a1 fchan3)
	(hpxmov a1 '0 a2)
	(ncons a2)
	(hpxmov a1 '1 a1)
	(xcons a2 a1)
	(return)
fchan3
	(movnil a2)
	(ncons a2)
	(mov '0 a1)
	(xcons a2 a1)
	(return)
fchan4
	(mov '-3 a1)
	(mov |.fchannel| a2)
	(bra errios)
fchan5
	(movnil a3)
	(mov maxchan a4)
	(bra fchan7)
fchan6
	(mov a4 a1)
	(push (@ ret_call_fchan21_74))
	(bra fchan21)
ret_call_fchan21_74
	(eval ())
	(cons a1 a3)
fchan7
	(sobgez a4 fchan6)
	(mov maxchan a4)
	(mov a3 a1)
	(return)
fchan8
	(mov tabchan a1)
	(bra copy)
	(lentry lclose 5)
	(cnbeq a4 '1 lclose8)
	(cnbne a4 '0 closer1)
	(movnil a4)
	(mov maxchan a1)
	(mov tabchan a2)
	(decr a1)
lclose1
	(hpxmov a2 a1 a3)
	(btnil a3 lclose2)
	(hpmovx a4 a2 a1)
	(fclos a1 a3)
	(cnbne a3 '0 closer0)
lclose2
	(sobgez a1 lclose1)
	(mov maxchan a1)
	(push (@ ret_call_outchani_75))
	(bra outchani)
ret_call_outchani_75
	(eval ())
	(bra phytrue)
lclose8
	(pop a1)
	(bffix a1 closer4)
	(cnblt a1 '0 closer2)
	(cnbge a1 maxchan closer2)
	(hpxmov tabchan a1 a2)
	(bfnil a2 closeint)
closer0
	(mov '-4 a1)
	(bra closer3)
closer1
	(mov |.lclose| a2)
	(mov '1 a1)
	(bra errwna)
closer2
	(mov '-3 a1)
closer3
	(mov |.lclose| a2)
	(bra errios)
closer4
	(mov |.lclose| a2)
	(bra errnia)
closeint
	(eval ())
	(movnil a2)
	(hpmovx a2 tabchan a1)
	(fclos a1 a2)
	(cnbeq a2 '0 phytrue)
	(mov |.lclose| a2)
	(bra errios)
	(lentry deletfi 2)
	(push (@ ret_call_coerci_76))
	(bra coerci)
ret_call_coerci_76
	(eval ())
	(mov |.deletfi| savea4)
	(push (@ ret_call_stringa1_77))
	(bra stringa1)
ret_call_stringa1_77
	(eval ())
	(fdele a1 a1)
	(cnbeq a1 '0 phytrue)
	(mov |.deletfi| a2)
	(bra errios)
	(lentry renamfi 3)
	(push a2)
	(push (@ ret_call_coerci_78))
	(bra coerci)
ret_call_coerci_78
	(eval ())
	(xtopst a1)
	(push (@ ret_call_coerci_79))
	(bra coerci)
ret_call_coerci_79
	(eval ())
	(mov a1 a2)
	(pop a1)
	(mov |.renamfi| savea4)
	(push (@ ret_call_stringa1_80))
	(bra stringa1)
ret_call_stringa1_80
	(eval ())
	(push (@ ret_call_stringa2_81))
	(bra stringa2)
ret_call_stringa2_81
	(eval ())
	(frena a1 a2 a1)
	(cnbeq a1 '0 phytrue)
	(mov |.renamfi| a2)
	(bra errios)
	(lentry copyfi 3)
	(push a2)
	(push (@ ret_call_coerci_82))
	(bra coerci)
ret_call_coerci_82
	(eval ())
	(xtopst a1)
	(push (@ ret_call_coerci_83))
	(bra coerci)
ret_call_coerci_83
	(eval ())
	(mov a1 a2)
	(pop a1)
	(mov |.copyfi| savea4)
	(push (@ ret_call_stringa1_84))
	(bra stringa1)
ret_call_stringa1_84
	(eval ())
	(push (@ ret_call_stringa2_85))
	(bra stringa2)
ret_call_stringa2_85
	(eval ())
	(fcopy a1 a2 a1)
	(cnbeq a1 '0 phytrue)
	(mov |.copyfi| a2)
	(bra errios)
	(lentry makdir 2)
	(push (@ ret_call_coerci_86))
	(bra coerci)
ret_call_coerci_86
	(eval ())
	(mov |.makdir| savea4)
	(push (@ ret_call_stringa1_87))
	(bra stringa1)
ret_call_stringa1_87
	(eval ())
	(mkdir a1 a1)
	(cnbeq a1 '0 phytrue)
	(mov |.makdir| a2)
	(bra errios)
	(lentry remdir 2)
	(push (@ ret_call_coerci_88))
	(bra coerci)
ret_call_coerci_88
	(eval ())
	(mov |.remdir| savea4)
	(push (@ ret_call_stringa1_89))
	(bra stringa1)
ret_call_stringa1_89
	(eval ())
	(rmdir a1 a1)
	(cnbeq a1 '0 phytrue)
	(mov |.remdir| a2)
	(bra errios)
	(lentry probefi 2)
	(push (@ ret_call_coerci_90))
	(bra coerci)
ret_call_coerci_90
	(eval ())
	(mov |.probefi| savea4)
	(push (@ ret_call_stringa1_91))
	(bra stringa1)
ret_call_stringa1_91
	(eval ())
	(fprobe a1 a1)
	(cnbeq a1 '0 phytrue)
	(movnil a1)
	(return)
	(lentry savecor 2)
	(push (@ ret_call_coerci_92))
	(bra coerci)
ret_call_coerci_92
	(eval ())
	(mov |.savecor| savea4)
	(push (@ ret_call_stringa1_93))
	(bra stringa1)
ret_call_stringa1_93
	(eval ())
	(push |.t|)
	(corsav a1 a1)
	(cnbeq a1 '0 corres)
	(mov |.savecor| a2)
	(bra errios)
corres
	(pop a1)
	(return)
	(lentry restcor 2)
	(push (@ ret_call_coerci_94))
	(bra coerci)
ret_call_coerci_94
	(eval ())
	(mov |.restcor| savea4)
	(push (@ ret_call_stringa1_95))
	(bra stringa1)
ret_call_stringa1_95
	(eval ())
restcori
	(eval ())
	(corest a1 a1)
	(cnbeq a1 '0 restres)
	(mov |.restcor| a2)
	(bra errios)
restres
	(pop a1)
	(movnil a1)
	(return)
	(impure)
	(ladr istream 0)
	(ladr ostream 0)
	(ladr tabchan 0)
	(ladr curinch 0)
	(ladr curoutch 0)
	(ladr lgbuffer 0)
	(ladr cntrlc 0)
	(ladr bufch 0)
	(ladr rubstrg 0)
	(ladr curprmpt 0)
	(ladr ligne 0)
	(ladr polig 0)
	(ladr inmax 0)
	(end)
))
